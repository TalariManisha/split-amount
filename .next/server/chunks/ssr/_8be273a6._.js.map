{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/hooks/use-convex-query.js"],"sourcesContent":["import { useQuery, useMutation } from \"convex/react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport const useConvexQuery = (query, ...args) => {\r\n  const result = useQuery(query, ...args);\r\n  const [data, setData] = useState(undefined);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Use effect to handle the state changes based on the query result\r\n  useEffect(() => {\r\n    if (result === undefined) {\r\n      setIsLoading(true);\r\n    } else {\r\n      try {\r\n        setData(result);\r\n        setError(null);\r\n      } catch (err) {\r\n        setError(err);\r\n        toast.error(err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }, [result]);\r\n\r\n  return {\r\n    data,\r\n    isLoading,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const useConvexMutation = (mutation) => {\r\n  const mutationFn = useMutation(mutation);\r\n  const [data, setData] = useState(undefined);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const mutate = async (...args) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await mutationFn(...args);\r\n      setData(response);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      toast.error(err.message);\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return { mutate, data, isLoading, error };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,iBAAiB,CAAC,OAAO,GAAG;IACvC,MAAM,SAAS,CAAA,GAAA,wJAAA,CAAA,WAAQ,AAAD,EAAE,UAAU;IAClC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,mEAAmE;IACnE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,WAAW,WAAW;YACxB,aAAa;QACf,OAAO;YACL,IAAI;gBACF,QAAQ;gBACR,SAAS;YACX,EAAE,OAAO,KAAK;gBACZ,SAAS;gBACT,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,IAAI,OAAO;YACzB,SAAU;gBACR,aAAa;YACf;QACF;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;QACL;QACA;QACA;IACF;AACF;AAEO,MAAM,oBAAoB,CAAC;IAChC,MAAM,aAAa,CAAA,GAAA,wJAAA,CAAA,cAAW,AAAD,EAAE;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,SAAS,OAAO,GAAG;QACvB,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,cAAc;YACrC,QAAQ;YACR,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,SAAS;YACT,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,IAAI,OAAO;YACvB,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,OAAO;QAAE;QAAQ;QAAM;QAAW;IAAM;AAC1C","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/components/ui/avatar.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Avatar({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<AvatarPrimitive.Root\r\n      data-slot=\"avatar\"\r\n      className={cn(\"relative flex size-8 shrink-0 overflow-hidden rounded-full\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction AvatarImage({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<AvatarPrimitive.Image\r\n      data-slot=\"avatar-image\"\r\n      className={cn(\"aspect-square size-full\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction AvatarFallback({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<AvatarPrimitive.Fallback\r\n      data-slot=\"avatar-fallback\"\r\n      className={cn(\r\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC,kKAAA,CAAA,OAAoB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8DAA8D;QAC3E,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC,kKAAA,CAAA,QAAqB;QACrB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC,kKAAA,CAAA,WAAwB;QACxB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,oEACA;QAED,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardHeader({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardTitle({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardDescription({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardAction({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardContent({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\r\n}\r\n\r\nfunction CardFooter({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;;;;AAEA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBAAQ,8OAAC;QAAI,aAAU;QAAe,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QAAa,GAAG,KAAK;;;;;;AACnF;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/components/ui/input.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({\r\n  className,\r\n  type,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,SAAS,MAAM,EACb,SAAS,EACT,IAAI,EACJ,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/components/ui/label.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC,iKAAA,CAAA,OAAmB;QACnB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/components/ui/textarea.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Textarea({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<textarea\r\n      data-slot=\"textarea\"\r\n      className={cn(\r\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,ucACA;QAED,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/components/ui/radio-group.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\r\nimport { CircleIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction RadioGroup({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<RadioGroupPrimitive.Root\r\n      data-slot=\"radio-group\"\r\n      className={cn(\"grid gap-3\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction RadioGroupItem({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<RadioGroupPrimitive.Item\r\n      data-slot=\"radio-group-item\"\r\n      className={cn(\r\n        \"border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}>\r\n      <RadioGroupPrimitive.Indicator\r\n        data-slot=\"radio-group-indicator\"\r\n        className=\"relative flex items-center justify-center\">\r\n        <CircleIcon\r\n          className=\"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>)\r\n  );\r\n}\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC,0KAAA,CAAA,OAAwB;QACxB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC,0KAAA,CAAA,OAAwB;QACxB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,0XACA;QAED,GAAG,KAAK;kBACT,cAAA,8OAAC,0KAAA,CAAA,YAA6B;YAC5B,aAAU;YACV,WAAU;sBACV,cAAA,8OAAC,0MAAA,CAAA,aAAU;gBACT,WAAU;;;;;;;;;;;;;;;;AAIpB","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/app/%28main%29/settlements/%5Btype%5D/%5Bid%5D/components/settlement-form.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { api } from \"@/convex/_generated/api\";\r\nimport { useConvexMutation, useConvexQuery } from \"@/hooks/use-convex-query\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { toast } from \"sonner\";\r\n\r\n// Form schema validation\r\nconst settlementSchema = z.object({\r\n  amount: z\r\n    .string()\r\n    .min(1, \"Amount is required\")\r\n    .refine((val) => !isNaN(parseFloat(val)) && parseFloat(val) > 0, {\r\n      message: \"Amount must be a positive number\",\r\n    }),\r\n  note: z.string().optional(),\r\n  paymentType: z.enum([\"youPaid\", \"theyPaid\"]),\r\n});\r\n\r\nexport default function SettlementForm({ entityType, entityData, onSuccess }) {\r\n  const { data: currentUser } = useConvexQuery(api.users.getCurrentUser);\r\n  const createSettlement = useConvexMutation(api.settlements.createSettlement);\r\n\r\n  // Set up form with validation\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    resolver: zodResolver(settlementSchema),\r\n    defaultValues: {\r\n      amount: \"\",\r\n      note: \"\",\r\n      paymentType: \"youPaid\",\r\n    },\r\n  });\r\n\r\n  // Get selected payment direction\r\n  const paymentType = watch(\"paymentType\");\r\n\r\n  // Single user settlement\r\n  const handleUserSettlement = async (data) => {\r\n    const amount = parseFloat(data.amount);\r\n\r\n    try {\r\n      // Determine payer and receiver based on the selected payment type\r\n      const paidByUserId =\r\n        data.paymentType === \"youPaid\"\r\n          ? currentUser._id\r\n          : entityData.counterpart.userId;\r\n\r\n      const receivedByUserId =\r\n        data.paymentType === \"youPaid\"\r\n          ? entityData.counterpart.userId\r\n          : currentUser._id;\r\n\r\n      await createSettlement.mutate({\r\n        amount,\r\n        note: data.note,\r\n        paidByUserId,\r\n        receivedByUserId,\r\n        // No groupId for user settlements\r\n      });\r\n\r\n      toast.success(\"Settlement recorded successfully!\");\r\n      if (onSuccess) onSuccess();\r\n    } catch (error) {\r\n      toast.error(\"Failed to record settlement: \" + error.message);\r\n    }\r\n  };\r\n\r\n  // Group settlement\r\n  const handleGroupSettlement = async (data, selectedUserId) => {\r\n    if (!selectedUserId) {\r\n      toast.error(\"Please select a group member to settle with\");\r\n      return;\r\n    }\r\n\r\n    const amount = parseFloat(data.amount);\r\n\r\n    try {\r\n      // Get the selected user from the group balances\r\n      const selectedUser = entityData.balances.find(\r\n        (balance) => balance.userId === selectedUserId\r\n      );\r\n\r\n      if (!selectedUser) {\r\n        toast.error(\"Selected user not found in group\");\r\n        return;\r\n      }\r\n\r\n      // Determine payer and receiver based on the selected payment type and balances\r\n      const paidByUserId =\r\n        data.paymentType === \"youPaid\" ? currentUser._id : selectedUser.userId;\r\n\r\n      const receivedByUserId =\r\n        data.paymentType === \"youPaid\" ? selectedUser.userId : currentUser._id;\r\n\r\n      await createSettlement.mutate({\r\n        amount,\r\n        note: data.note,\r\n        paidByUserId,\r\n        receivedByUserId,\r\n        groupId: entityData.group.id,\r\n      });\r\n\r\n      toast.success(\"Settlement recorded successfully!\");\r\n      if (onSuccess) onSuccess();\r\n    } catch (error) {\r\n      toast.error(\"Failed to record settlement: \" + error.message);\r\n    }\r\n  };\r\n\r\n  // Handle form submission\r\n  const onSubmit = async (data) => {\r\n    if (entityType === \"user\") {\r\n      await handleUserSettlement(data);\r\n    } else if (entityType === \"group\" && selectedGroupMemberId) {\r\n      await handleGroupSettlement(data, selectedGroupMemberId);\r\n    }\r\n  };\r\n\r\n  // For group settlements, we need to select a member\r\n  const [selectedGroupMemberId, setSelectedGroupMemberId] = useState(null);\r\n\r\n  if (!currentUser) return null;\r\n\r\n  // Render the form for individual settlement\r\n  if (entityType === \"user\") {\r\n    const otherUser = entityData.counterpart;\r\n    const netBalance = entityData.netBalance;\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n        {/* Balance information */}\r\n        <div className=\"bg-muted p-4 rounded-lg\">\r\n          <h3 className=\"font-medium mb-2\">Current balance</h3>\r\n          {netBalance === 0 ? (\r\n            <p>You are all settled up with {otherUser.name}</p>\r\n          ) : netBalance > 0 ? (\r\n            <div className=\"flex justify-between items-center\">\r\n              <p>\r\n                <span className=\"font-medium\">{otherUser.name}</span> owes you\r\n              </p>\r\n              <span className=\"text-xl font-bold text-green-600\">\r\n                ${netBalance.toFixed(2)}\r\n              </span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex justify-between items-center\">\r\n              <p>\r\n                You owe <span className=\"font-medium\">{otherUser.name}</span>\r\n              </p>\r\n              <span className=\"text-xl font-bold text-red-600\">\r\n                ${Math.abs(netBalance).toFixed(2)}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Payment direction */}\r\n        <div className=\"space-y-2\">\r\n          <Label>Who paid?</Label>\r\n          <RadioGroup\r\n            defaultValue=\"youPaid\"\r\n            {...register(\"paymentType\")}\r\n            className=\"flex flex-col space-y-2\"\r\n            onValueChange={(value) => {\r\n              // This manual approach is needed because RadioGroup doesn't work directly with react-hook-form\r\n              register(\"paymentType\").onChange({\r\n                target: { name: \"paymentType\", value },\r\n              });\r\n            }}\r\n          >\r\n            <div className=\"flex items-center space-x-2 border rounded-md p-3\">\r\n              <RadioGroupItem value=\"youPaid\" id=\"youPaid\" />\r\n              <Label htmlFor=\"youPaid\" className=\"flex-grow cursor-pointer\">\r\n                <div className=\"flex items-center\">\r\n                  <Avatar className=\"h-6 w-6 mr-2\">\r\n                    <AvatarImage src={currentUser.imageUrl} />\r\n                    <AvatarFallback>\r\n                      {currentUser.name.charAt(0)}\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                  <span>You paid {otherUser.name}</span>\r\n                </div>\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2 border rounded-md p-3\">\r\n              <RadioGroupItem value=\"theyPaid\" id=\"theyPaid\" />\r\n              <Label htmlFor=\"theyPaid\" className=\"flex-grow cursor-pointer\">\r\n                <div className=\"flex items-center\">\r\n                  <Avatar className=\"h-6 w-6 mr-2\">\r\n                    <AvatarImage src={otherUser.imageUrl} />\r\n                    <AvatarFallback>{otherUser.name.charAt(0)}</AvatarFallback>\r\n                  </Avatar>\r\n                  <span>{otherUser.name} paid you</span>\r\n                </div>\r\n              </Label>\r\n            </div>\r\n          </RadioGroup>\r\n        </div>\r\n\r\n        {/* Amount */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"amount\">Amount</Label>\r\n          <div className=\"relative\">\r\n            <span className=\"absolute left-3 top-2.5\">$</span>\r\n            <Input\r\n              id=\"amount\"\r\n              placeholder=\"0.00\"\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              min=\"0.01\"\r\n              className=\"pl-7\"\r\n              {...register(\"amount\")}\r\n            />\r\n          </div>\r\n          {errors.amount && (\r\n            <p className=\"text-sm text-red-500\">{errors.amount.message}</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Note */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"note\">Note (optional)</Label>\r\n          <Textarea\r\n            id=\"note\"\r\n            placeholder=\"Dinner, rent, etc.\"\r\n            {...register(\"note\")}\r\n          />\r\n        </div>\r\n\r\n        <Button type=\"submit\" className=\"w-full\" disabled={isSubmitting}>\r\n          {isSubmitting ? \"Recording...\" : \"Record settlement\"}\r\n        </Button>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  // Render form for group settlement\r\n  if (entityType === \"group\") {\r\n    const groupMembers = entityData.balances;\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n        {/* Select group member */}\r\n        <div className=\"space-y-2\">\r\n          <Label>Who are you settling with?</Label>\r\n          <div className=\"space-y-2\">\r\n            {groupMembers.map((member) => {\r\n              const isSelected = selectedGroupMemberId === member.userId;\r\n              const isOwing = member.netBalance < 0; // negative means they owe you\r\n              const isOwed = member.netBalance > 0; // positive means you owe them\r\n\r\n              return (\r\n                <div\r\n                  key={member.userId}\r\n                  className={`border rounded-md p-3 cursor-pointer transition-colors ${\r\n                    isSelected\r\n                      ? \"border-primary bg-primary/5\"\r\n                      : \"hover:bg-muted/50\"\r\n                  }`}\r\n                  onClick={() => setSelectedGroupMemberId(member.userId)}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Avatar className=\"h-8 w-8\">\r\n                        <AvatarImage src={member.imageUrl} />\r\n                        <AvatarFallback>{member.name.charAt(0)}</AvatarFallback>\r\n                      </Avatar>\r\n                      <span className=\"font-medium\">{member.name}</span>\r\n                    </div>\r\n                    <div\r\n                      className={`font-medium ${\r\n                        isOwing\r\n                          ? \"text-green-600\"\r\n                          : isOwed\r\n                            ? \"text-red-600\"\r\n                            : \"\"\r\n                      }`}\r\n                    >\r\n                      {isOwing\r\n                        ? `They owe you $${Math.abs(member.netBalance).toFixed(2)}`\r\n                        : isOwed\r\n                          ? `You owe $${Math.abs(member.netBalance).toFixed(2)}`\r\n                          : \"Settled up\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          {!selectedGroupMemberId && (\r\n            <p className=\"text-sm text-amber-600\">\r\n              Please select a member to settle with\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {selectedGroupMemberId && (\r\n          <>\r\n            {/* Payment direction */}\r\n            <div className=\"space-y-2\">\r\n              <Label>Who paid?</Label>\r\n              <RadioGroup\r\n                defaultValue=\"youPaid\"\r\n                {...register(\"paymentType\")}\r\n                className=\"flex flex-col space-y-2\"\r\n                onValueChange={(value) => {\r\n                  register(\"paymentType\").onChange({\r\n                    target: { name: \"paymentType\", value },\r\n                  });\r\n                }}\r\n              >\r\n                <div className=\"flex items-center space-x-2 border rounded-md p-3\">\r\n                  <RadioGroupItem value=\"youPaid\" id=\"youPaid\" />\r\n                  <Label htmlFor=\"youPaid\" className=\"flex-grow cursor-pointer\">\r\n                    <div className=\"flex items-center\">\r\n                      <Avatar className=\"h-6 w-6 mr-2\">\r\n                        <AvatarImage src={currentUser.imageUrl} />\r\n                        <AvatarFallback>\r\n                          {currentUser.name.charAt(0)}\r\n                        </AvatarFallback>\r\n                      </Avatar>\r\n                      <span>\r\n                        You paid{\" \"}\r\n                        {\r\n                          groupMembers.find(\r\n                            (m) => m.userId === selectedGroupMemberId\r\n                          )?.name\r\n                        }\r\n                      </span>\r\n                    </div>\r\n                  </Label>\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-2 border rounded-md p-3\">\r\n                  <RadioGroupItem value=\"theyPaid\" id=\"theyPaid\" />\r\n                  <Label\r\n                    htmlFor=\"theyPaid\"\r\n                    className=\"flex-grow cursor-pointer\"\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      <Avatar className=\"h-6 w-6 mr-2\">\r\n                        <AvatarImage\r\n                          src={\r\n                            groupMembers.find(\r\n                              (m) => m.userId === selectedGroupMemberId\r\n                            )?.imageUrl\r\n                          }\r\n                        />\r\n                        <AvatarFallback>\r\n                          {groupMembers\r\n                            .find((m) => m.userId === selectedGroupMemberId)\r\n                            ?.name.charAt(0)}\r\n                        </AvatarFallback>\r\n                      </Avatar>\r\n                      <span>\r\n                        {\r\n                          groupMembers.find(\r\n                            (m) => m.userId === selectedGroupMemberId\r\n                          )?.name\r\n                        }{\" \"}\r\n                        paid you\r\n                      </span>\r\n                    </div>\r\n                  </Label>\r\n                </div>\r\n              </RadioGroup>\r\n            </div>\r\n\r\n            {/* Amount */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"amount\">Amount</Label>\r\n              <div className=\"relative\">\r\n                <span className=\"absolute left-3 top-2.5\">$</span>\r\n                <Input\r\n                  id=\"amount\"\r\n                  placeholder=\"0.00\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0.01\"\r\n                  className=\"pl-7\"\r\n                  {...register(\"amount\")}\r\n                />\r\n              </div>\r\n              {errors.amount && (\r\n                <p className=\"text-sm text-red-500\">{errors.amount.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Note */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"note\">Note (optional)</Label>\r\n              <Textarea\r\n                id=\"note\"\r\n                placeholder=\"Dinner, rent, etc.\"\r\n                {...register(\"note\")}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        <Button\r\n          type=\"submit\"\r\n          className=\"w-full\"\r\n          disabled={isSubmitting || !selectedGroupMemberId}\r\n        >\r\n          {isSubmitting ? \"Recording...\" : \"Record settlement\"}\r\n        </Button>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1258, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/surya/Desktop/spliter%20app/ai-splitwise-clone/app/%28main%29/settlements/%5Btype%5D/%5Bid%5D/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { api } from \"@/convex/_generated/api\";\r\nimport { useConvexQuery } from \"@/hooks/use-convex-query\";\r\nimport { BarLoader } from \"react-spinners\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { ArrowLeft, Users } from \"lucide-react\";\r\nimport SettlementForm from \"./components/settlement-form\";\r\n\r\nexport default function SettlementPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const { type, id } = params;\r\n\r\n  const { data, isLoading } = useConvexQuery(\r\n    api.settlements.getSettlementData,\r\n    {\r\n      entityType: type,\r\n      entityId: id,\r\n    }\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto py-12\">\r\n        <BarLoader width={\"100%\"} color=\"#36d7b7\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Function to handle after successful settlement creation\r\n  const handleSuccess = () => {\r\n    // Redirect based on type\r\n    if (type === \"user\") {\r\n      router.push(`/person/${id}`);\r\n    } else if (type === \"group\") {\r\n      router.push(`/groups/${id}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-6 max-w-lg\">\r\n      <Button\r\n        variant=\"outline\"\r\n        size=\"sm\"\r\n        className=\"mb-4\"\r\n        onClick={() => router.back()}\r\n      >\r\n        <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n        Back\r\n      </Button>\r\n\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-5xl gradient-title\">Record a settlement</h1>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          {type === \"user\"\r\n            ? `Settling up with ${data?.counterpart?.name}`\r\n            : `Settling up in ${data?.group?.name}`}\r\n        </p>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center gap-3\">\r\n            {type === \"user\" ? (\r\n              <Avatar className=\"h-10 w-10\">\r\n                <AvatarImage src={data?.counterpart?.imageUrl} />\r\n                <AvatarFallback>\r\n                  {data?.counterpart?.name?.charAt(0) || \"?\"}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n            ) : (\r\n              <div className=\"bg-primary/10 p-2 rounded-md\">\r\n                <Users className=\"h-6 w-6 text-primary\" />\r\n              </div>\r\n            )}\r\n            <CardTitle>\r\n              {type === \"user\" ? data?.counterpart?.name : data?.group?.name}\r\n            </CardTitle>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <SettlementForm\r\n            entityType={type}\r\n            entityData={data}\r\n            onSuccess={handleSuccess}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAVA;;;;;;;;;;;AAYe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG;IAErB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,iBAAc,AAAD,EACvC,2HAAA,CAAA,MAAG,CAAC,WAAW,CAAC,iBAAiB,EACjC;QACE,YAAY;QACZ,UAAU;IACZ;IAGF,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,6LAAA,CAAA,YAAS;gBAAC,OAAO;gBAAQ,OAAM;;;;;;;;;;;IAGtC;IAEA,0DAA0D;IAC1D,MAAM,gBAAgB;QACpB,yBAAyB;QACzB,IAAI,SAAS,QAAQ;YACnB,OAAO,IAAI,CAAC,CAAC,QAAQ,EAAE,IAAI;QAC7B,OAAO,IAAI,SAAS,SAAS;YAC3B,OAAO,IAAI,CAAC,CAAC,QAAQ,EAAE,IAAI;QAC7B;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,2HAAA,CAAA,SAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,OAAO,IAAI;;kCAE1B,8OAAC,gNAAA,CAAA,YAAS;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;0BAIxC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA0B;;;;;;kCACxC,8OAAC;wBAAE,WAAU;kCACV,SAAS,SACN,CAAC,iBAAiB,EAAE,MAAM,aAAa,MAAM,GAC7C,CAAC,eAAe,EAAE,MAAM,OAAO,MAAM;;;;;;;;;;;;0BAI7C,8OAAC,yHAAA,CAAA,OAAI;;kCACH,8OAAC,yHAAA,CAAA,aAAU;kCACT,cAAA,8OAAC;4BAAI,WAAU;;gCACZ,SAAS,uBACR,8OAAC,2HAAA,CAAA,SAAM;oCAAC,WAAU;;sDAChB,8OAAC,2HAAA,CAAA,cAAW;4CAAC,KAAK,MAAM,aAAa;;;;;;sDACrC,8OAAC,2HAAA,CAAA,iBAAc;sDACZ,MAAM,aAAa,MAAM,OAAO,MAAM;;;;;;;;;;;yDAI3C,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;;;;;;;8CAGrB,8OAAC,yHAAA,CAAA,YAAS;8CACP,SAAS,SAAS,MAAM,aAAa,OAAO,MAAM,OAAO;;;;;;;;;;;;;;;;;kCAIhE,8OAAC,yHAAA,CAAA,cAAW;kCACV,cAAA,8OAAC,yLAAA,CAAA,UAAc;4BACb,YAAY;4BACZ,YAAY;4BACZ,WAAW;;;;;;;;;;;;;;;;;;;;;;;AAMvB","debugId":null}}]
}